<div class="dynamic-template-container">

  <h1>Dynamic Template:</h1>
  <div class="row-align">

    <div class="left-container">
      <div class="information-container">
        <mat-form-field class="highlight" id='empName'>
          <mat-label>Employer Name</mat-label>
          <input matInput [disabled]="true" name='empName' placeholder="Employer Name"
            [(ngModel)]="selectedData.empName">
        </mat-form-field>
      </div>
    </div>

    <div class="right-container">
      <div class="table-container">
        <div class="links">
          <!-- <button type="submit" (click)="openPopup(true)">Open Popup</button> -->
          <!--  -->
          <a appInsertion id="loadingLink" href="javascript:void(0)" (click)="openPopup(true)">Open Popup</a>
        </div>

        <br> <hr>
        <div class="display-info">
          <div appInsertion id="loadingDiv"></div>
          <ng-container [ngTemplateOutlet]="tableTmpl" [ngTemplateOutletContext]="{data:gridData, columns: columnDef}">
          </ng-container>
        </div>
      </div>

    </div>

  </div>




  <!-- <select data-loader="btncountry" style="height: 25px; width: 130px;;" (change)="loadoncountry('country')">
      <option value="select">-- select Country --</option>
      <option value="USA">USA</option>
      <option value="India">India</option>
  </select> -->

  <ng-template #loader [ngIf]="isLoading">
    <div class="loader">Loading...</div>
  </ng-template>

  <ng-template #informationTmpl let-data="data">
    <p>{{data.name}}</p>
    <p>{{data.address}}</p>
  </ng-template>



  <!-- <div appInsertion id="loadingDiv"> -->

  <ng-template #tableTmpl let-data="data" let-columns="columns">
    <div class="table-scroll" id="popup">
      <div class="table-wrap">
        <table class="main-table" id="main-table">
          <thead>
            <tr>
              <th *ngFor="let item of columns" scope="col" [class]='item?.class'>{{item.header}}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let element of data; let ind=index">
              <ng-container *ngFor="let column of columns">
                <ng-container *ngIf="!column?.type">
                  <td [class]="column?.class">
                    {{element[column.field]}}
                  </td>
                </ng-container>
                <ng-container *ngIf="column?.type === 'TEXT_BOX'">
                  <ng-container [ngTemplateOutlet]="numberCellTemplate"
                    [ngTemplateOutletContext]="{element:element, column: column, ind:ind}">
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="column?.type === 'CHECK_BOX'">
                  <ng-container [ngTemplateOutlet]="chkboxCellTemplate"
                    [ngTemplateOutletContext]="{element:element, column: column, ind:ind}">
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="column?.type === 'ACTIONS'">
                  <ng-container [ngTemplateOutlet]="actionCellTemplate"
                    [ngTemplateOutletContext]="{element:element, column: column, ind:ind}">
                  </ng-container>
                </ng-container>
              </ng-container>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </ng-template>


  <ng-template #numberCellTemplate let-element='element' let-column='column' let-ind='ind'>
    <td>
      <input type="text" name='text-box-{{ind}}' [(ngModel)]="element[column.field]"
        (blur)='onBlur(element, column, ind)' />
    </td>
  </ng-template>

  <ng-template #chkboxCellTemplate let-element='element' let-column='column' let-ind='ind'>
    <td>
      <input type="checkbox" name='text-box-{{ind}}' [(ngModel)]="element[column.field]" />
    </td>
  </ng-template>

  <ng-template #actionCellTemplate let-element='element' let-column='column' let-ind='ind'>
    <td id="cell-{{ind}}" [class]='column?.class'>
      <div class="btn-circle">
        <button class="btn-fab red" (click)="closeCell(element, column, ind)"><span class="btn-wrapper">+</span>
          <div class="btn-ripple"></div>
          <div class="btn-overlay"></div>
        </button>
      </div>
      <div class="chk-box">
        <input type="checkbox" name='chk-box-{{ind}}' id='chk-box-{{ind}}'
          (click)="onChkBoxChange($event, element, column, ind)" [(ngModel)]="element[column.field]" />
      </div>
    </td>
  </ng-template>

</div>
