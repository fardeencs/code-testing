<div class="dynamic-template-container">

  <h1>Dynamic Template:</h1>

  <div class="main-container">

    <div class="right-container">
      <div class="table-container">
        <div class="links">
          <!-- <button type="submit" (click)="openPopup(true)">Open Popup</button> -->
          <!--  -->
          <a appInsertion id="loadingLink" href="javascript:void(0)" (click)="openPopup(true)">Open Popup</a>
        </div>

        <br>
        <hr>
        <div class="display-info">
          <div appInsertion id="loadingDiv"></div>
          <ng-container
            [ngTemplateOutlet]="tableTmpl"
            [ngTemplateOutletContext]="{data:gridData, columns: columnDef, gridId: gridId}">
          </ng-container>
        </div>
      </div>

    </div>

    <div class="left-container">
      <div class="inner-left">

        <div class="information-container">
          <ng-template #informationTmpl [ngIf]='true'>
            <div class="template-container row-align">
              <div>
                <mat-form-field class="highlight" id='empName'>
                  <mat-label>Employer Name</mat-label>
                  <input matInput [disabled]="true" name='empName' placeholder="Employer Name"
                    [(ngModel)]="selectedData.name">
                </mat-form-field>
              </div>
              <div>
                <mat-form-field class="highlight" id='address'>
                  <mat-label>Employer Address</mat-label>
                  <input matInput name='address' placeholder="Employer Address" [(ngModel)]="selectedData.address">
                </mat-form-field>
              </div>
            </div>
          </ng-template>
        </div>
        <div class="loader-container">
          <ng-template #loader [ngIf]="isLoading">
            <div class="loader">Loading...</div>
          </ng-template>
        </div>
      </div>

    </div>

  </div>


  <!-- <div class="res-tbl-container">
      <div class="row-align">-->
  <!-- <div>
          <app-responsive-table></app-responsive-table>
        </div> -->
  <!--</div>
  </div> -->



  <ng-template #informationTmpl1 let-data="data">
    <p>{{data.name}}</p>
    <p>{{data.address}}</p>
  </ng-template>

  <ng-template #tableTmpl let-data="data" let-columns="columns" let-gridId="gridId">
    <div class="table-scroll" id="popup">
      <div class="table-wrap">
        <table class="main-table" id="main-table">
          <thead>
            <tr>
              <th *ngFor="let item of columns" scope="col" [class]='item?.class'>{{item.header}}</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngIf="data?.length === 0">
               <tr>
                 <td class="no-data-found" [attr.colspan]="columns.length">No Data found</td>
              </tr>
            </ng-container>
            <ng-container *ngIf="data?.length > 0">
              <tr *ngFor="let element of data; let ind=index">
                <ng-container *ngFor="let column of columns">
                  <ng-container *ngIf="!column?.type">
                    <td [class]="column?.class">
                      {{element[column.field]}}
                    </td>
                  </ng-container>
                  <ng-container *ngIf="column?.type === 'TEXT_BOX'">
                    <ng-container [ngTemplateOutlet]="numberCellTemplate"
                      [ngTemplateOutletContext]="{element:element, column: column, ind:ind, gridId:gridId}">
                    </ng-container>
                  </ng-container>
                  <ng-container *ngIf="column?.type === 'CHECK_BOX'">
                    <ng-container [ngTemplateOutlet]="chkboxCellTemplate"
                      [ngTemplateOutletContext]="{element:element, column: column, ind:ind, gridId:gridId}">
                    </ng-container>
                  </ng-container>
                  <ng-container *ngIf="column?.type === 'ACTIONS'">
                    <ng-container [ngTemplateOutlet]="actionCellTemplate"
                      [ngTemplateOutletContext]="{element:element, column: column, ind:ind, gridId:gridId}">
                    </ng-container>
                  </ng-container>
                </ng-container>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
  </ng-template>

  <ng-template #numberCellTemplate let-element='element' let-column='column' let-ind='ind' let-gridId="gridId">
    <td>
      <input type="text" name='text-box-{{ind}}-{{gridId}}'
        class="text-box-{{ind}}-{{gridId}}"
        numberMask min="0" max="1"
        [config]="numberOptions"
        [(ngModel)]="element[column.field]"
        (blur)='onBlur(element, column, ind)' />
    </td>
  </ng-template>

  <ng-template #chkboxCellTemplate let-element='element' let-column='column' let-ind='ind' let-gridId="gridId">
    <td>
      <input type="checkbox" class="text-box-{{ind}}-{{gridId}}"
       name='check-box-{{ind}}-{{gridId}}'
       class="check-box-{{ind}}-{{gridId}}"
       [(ngModel)]="element[column.field]" />
    </td>
  </ng-template>

  <ng-template #actionCellTemplate let-element='element' let-column='column' let-ind='ind' let-gridId="gridId">
    <td id="cell-{{ind}}" [class]='column?.class'>
      <div class="btn-circle">
        <button class="btn-fab red" (click)="closeCell(element, column, ind)"><span class="btn-wrapper">+</span>
          <div class="btn-ripple"></div>
          <div class="btn-overlay"></div>
        </button>
      </div>
      <div class="chk-box">
        <input type="checkbox" name='action-chk-box-{{ind}}-{{gridId}}'
          id='action-chk-box-{{ind}}-{{gridId}}'
          class="action-chk-box-{{ind}}-{{gridId}}"
          (click)="onChkBoxChange($event, element, column, ind)" [(ngModel)]="element[column.field]" />
      </div>
    </td>
  </ng-template>

</div>
